{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Buho | Create Clearance</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="{% static 'css/buho_noc.css' %}">
  <link rel="stylesheet" href="{% static 'css/buho_components.css' %}">
  <link rel="stylesheet" href="{% static 'css/buho_auth.css' %}">
</head>
<body class="noc-mode noc-grid noc-noise scanline auth-page min-h-screen">
  <main id="auth-shell" class="max-w-3xl mx-auto px-6 py-10" x-data="{step:1}">
    <section class="classified-card p-6 lg:p-8">
      <div class="flex items-center gap-3 mb-6">
        <div class="step-dot" :class="step>=1 ? 'active' : ''">1</div><span class="text-sm">Organization</span>
        <div class="h-px bg-slate-700 flex-1"></div>
        <div class="step-dot" :class="step>=2 ? 'active' : ''">2</div><span class="text-sm">Admin user</span>
        <div class="h-px bg-slate-700 flex-1"></div>
        <div class="step-dot" :class="step>=3 ? 'active' : ''">3</div><span class="text-sm">Confirm</span>
      </div>

      <form method="post" class="space-y-5">
        {% csrf_token %}

        <div x-show="step===1" x-transition>
          <h1 class="text-xl font-semibold">Create Organization</h1>
          <p class="text-slate-400 text-sm mb-4">Initialize operational domain for this command center.</p>
          <label class="text-xs uppercase text-slate-400">Organization</label>
          <div class="field-wrap relative mt-1">{{ form.organization_name }}</div>
        </div>

        <div x-show="step===2" x-transition>
          <h2 class="text-xl font-semibold">Super Admin Clearance</h2>
          <p class="text-slate-400 text-sm mb-4">Primary administrator credentials.</p>
          <div class="grid md:grid-cols-2 gap-4">
            <div><label class="text-xs uppercase text-slate-400">Username</label><div class="field-wrap relative mt-1">{{ form.username }}</div></div>
            <div><label class="text-xs uppercase text-slate-400">Email</label><div class="field-wrap relative mt-1">{{ form.email }}</div></div>
            <div><label class="text-xs uppercase text-slate-400">Password</label><div class="field-wrap relative mt-1">{{ form.password1 }}</div></div>
            <div><label class="text-xs uppercase text-slate-400">Confirm password</label><div class="field-wrap relative mt-1">{{ form.password2 }}</div></div>
          </div>
        </div>

        <div x-show="step===3" x-transition>
          <h2 class="text-xl font-semibold mb-2">Confirm Clearance</h2>
          <p class="text-slate-400 text-sm">Review setup and proceed.</p>
          <div class="approved-stamp mt-4 inline-block">Clearance created successfully</div>
          <div class="glass mt-4 p-3 text-sm text-slate-300">
            You are about to create organization and super-admin credentials.
          </div>
        </div>

        {% if form.errors %}<div class="text-rose-300 text-sm">{{ form.errors }}</div>{% endif %}

        <div class="flex flex-wrap gap-2 pt-2">
          <a href="{% url 'auth_login' %}" class="btn-noc btn-tertiary-noc">Back to login</a>
          <button type="button" class="btn-noc btn-secondary-noc" x-show="step>1" @click="step--">Previous</button>
          <button type="button" class="btn-noc btn-secondary-noc" x-show="step<3" @click="step++">Next</button>
          <button class="btn-noc btn-primary-noc ml-auto" type="submit" x-show="step===3">Create organization & super admin</button>
        </div>
      </form>
    </section>
  </main>
  <script>document.querySelectorAll('input').forEach((i)=>i.classList.add('text-slate-100','placeholder:text-slate-500'));</script>
</body>
</html>
