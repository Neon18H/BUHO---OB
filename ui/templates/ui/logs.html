{% extends 'ui/base.html' %}
{% load ui_tags %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3"><h1 class="h4 mb-0">Logs</h1><button class="btn btn-outline-secondary btn-sm" data-bs-toggle="offcanvas" data-bs-target="#filters">Filters</button></div>
<div class="offcanvas offcanvas-end" tabindex="-1" id="filters">
  <div class="offcanvas-header"><h5>Filter logs</h5><button class="btn-close" data-bs-dismiss="offcanvas"></button></div>
  <div class="offcanvas-body">
    <form method="get" class="vstack gap-2">
      <select class="form-select" name="level"><option value="">All levels</option>{% for lvl in 'INFO,WARN,ERROR'.split(',') %}<option value="{{ lvl }}" {% if level_filter == lvl %}selected{% endif %}>{{ lvl }}</option>{% endfor %}</select>
      <input class="form-control" name="q" value="{{ search }}" placeholder="Text or source">
      <button class="btn btn-primary">Apply</button>
    </form>
  </div>
</div>
<div class="card table-card">
  <div class="table-responsive sticky-table">
    <table class="table table-striped align-middle mb-0"><thead><tr><th>Timestamp</th><th>Source</th><th>Level</th><th>Message</th></tr></thead><tbody>
      {% for log in logs %}
      <tr><td>{{ log.timestamp|date:'Y-m-d H:i:s' }}</td><td>{{ log.source }}</td><td><span class="badge text-bg-{{ log.level|badge_class }}">{{ log.level }}</span></td><td>{{ log.message }}</td></tr>
      {% empty %}<tr><td colspan="4" class="text-body-secondary">No logs match current filters.</td></tr>{% endfor %}
    </tbody></table>
  </div>
</div>
{% endblock %}
