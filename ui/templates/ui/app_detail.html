{% extends 'ui/base.html' %}
{% block content %}
<h1 class="h4 mb-1">{{ app.name }}</h1>
<p class="text-body-secondary">{{ deploy_hint }}</p>
<div class="row g-3 mb-3">
  <div class="col-md-4"><div class="card p-3"><div>Health</div><h3>{{ app.app_health_score }}/100</h3></div></div>
  <div class="col-md-4"><div class="card p-3"><div>Runtime</div><h5>{{ app.runtime|default:'-' }} / {{ app.framework|default:'-' }}</h5></div></div>
  <div class="col-md-4"><div class="card p-3"><div>Ports</div><code>{{ app.ports_json }}</code></div></div>
</div>
<div class="card p-3 mb-3"><h6>Metrics</h6><canvas id="appMetrics"></canvas></div>
<div class="card p-3"><h6>Logs correlacionados</h6><table class="table table-sm"><thead><tr><th>TS</th><th>Lvl</th><th>Source</th><th>Message</th></tr></thead><tbody>{% for log in app_logs %}<tr><td>{{ log.ts|date:'Y-m-d H:i:s' }}</td><td>{{ log.level }}</td><td>{{ log.source }}</td><td>{{ log.message }}</td></tr>{% empty %}<tr><td colspan="4">Sin logs asociados.</td></tr>{% endfor %}</tbody></table></div>
{% endblock %}
{% block scripts %}
<script>
new Chart(document.getElementById('appMetrics'), {type:'line', data:{labels:{{ labels|safe }},datasets:[{label:'CPU %',data:{{ cpu_values|safe }},borderColor:'#4f46e5'},{label:'RAM %',data:{{ mem_values|safe }},borderColor:'#0ea5e9'}]}});
</script>
{% endblock %}
