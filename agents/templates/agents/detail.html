{% extends 'ui/base_noc.html' %}
{% block breadcrumbs %}Agents / {{ agent.hostname }}{% endblock %}
{% block content %}
<div x-data="{tab:'metrics'}" class="space-y-4">
  <div class="console-card p-4 flex justify-between items-center">
    <div>
      <h1 class="text-xl font-semibold">{{ agent.hostname }}</h1>
      <p class="text-sm text-slate-400">Server Health · uptime inferred by heartbeats · last heartbeat {{ agent.last_seen|date:'Y-m-d H:i:s' }}</p>
    </div>
    <div>
      {% if agent.status == 'ONLINE' %}<span class="console-badge console-badge-ok">ONLINE</span>{% else %}<span class="console-badge console-badge-bad">OFFLINE</span>{% endif %}
      <span class="console-badge" style="background:#1e293b">{{ agent.get_provider_display }}</span>
    </div>
  </div>

  <div class="flex flex-wrap gap-2">{% for t in agent_tabs %}<button class="console-tab" :class="tab==='{{t}}' && 'active'" @click="tab='{{t}}'; htmx.ajax('GET','{% url 'agents:detail_tab' agent.id 'metrics' %}'.replace('metrics','{{t}}'),{target:'#tab-content'})">{{ t|title }}</button>{% endfor %}</div>
  <div id="tab-content" class="console-card p-4" hx-get="{% url 'agents:detail_tab' agent.id 'metrics' %}" hx-trigger="load">Loading...</div>
</div>
{% endblock %}
